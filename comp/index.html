---
title: $YYYY Competition
layout: comp
angular_controller: CompMode
---

<!-- TODO:
* Add an outline of and link to the rules?
-->

{% if site.youtube_stream_link %}
	<span class="top-links" id="more-link">
		<a href="{{ site.competition_link }}">Learn more</a>
	</span>
{% endif %}
	<h1 style="text-align: center;">SR{{ site.year }} Live!</h1>
{% if site.youtube_stream_link %}
	<div id="live-stream-wrapper">
		<iframe width="560"
				height="315"
				src="{{ site.youtube_stream_link }}"
				frameborder="0"
				allowfullscreen>
		</iframe>
	</div>
{% else %}
	<p style="text-align: center;">
		Student Robotics is an annual robotics competition for young people aged 16-18.
		<br>
		<a href="{{ site.competition_link }}">Learn more</a>
	</p>
{% endif %}
<div id="match-info">
{% raw %}
<div class="scored match" style="position:relative;margin-top:10px;">
	<span style="position:absolute;margin-left:50px;left:0">
		<a href="{% endraw %}{{ site.baseurl }}/{% raw %}comp/points">more scores&hellip;</a>
	</span>
	<h4>
		Latest Scores<span data-ng-if="previous_match">: {{previous_match.display_name}}</span>
	</h4>
	<span data-ng-if="!previous_match">No scores yet recorded.</span>
	<div class="game headings"
	     data-ng-repeat-start="(arena, game) in previous_match.games"
	     data-ng-class="{single: $first}"
	     data-ng-show="!$first || $last">
		<h4>&nbsp;</h4>
		<table class="scores"
		       data-ng-if="game.scores">
			<thead>
				<tr>
					<th>&nbsp;</th>
				</tr>
			</thead>
			<tr data-ng-repeat="(type, scores) in game.scores">
				<th>{{type|titleCase}}</th>
			</tr>
		</table>
	</div>
	<div class="game" data-ng-repeat-end>
		<h4 style="color: {{arenas[arena].colour}};">Arena {{arenas[arena].display_name}}</h4>
		<table class="scores"
		       data-ng-if="game.scores">
			<thead>
				<tr>
					<th data-ng-repeat="tla in game.teams track by $index"
					    title="{{tla|teamInfo:teams|teamName}}">
						{{tla}}
						<span data-ng-if="!tla">-</span>
					</th>
				</tr>
			</thead>
			<tr data-ng-repeat="(type, scores) in game.scores">
				<td data-ng-repeat="tla in game.teams track by $index">
					<span data-ng-if="type != 'ranking'">
						{{scores[tla]}}
					</span>
					<span data-ng-if="type == 'ranking'">
						{{scores[tla]|ordinal}}
					</span>
				</td>
			</tr>
		</table>
		<p data-ng-if="!game.scores">No scores yet recorded for this game.</p>
	</div>
</div>
<script type="text/ng-template" id="match-info">
	<h4>{{data.description}}: {{data.match.display_name}}</h4>
	<div class="game headings"
	     data-ng-repeat-start="(arena, game) in data.match.games"
	     data-ng-class="{single: $first}"
	     data-ng-show="!$first || $last">
		<table>
			<thead>
				<tr>
					<th>Corner</th>
				</tr>
			</thead>
			<tr>
				<th>Team</th>
			</tr>
		</table>
	</div>
	<div class="game" data-ng-repeat-end>
		<table>
			<thead>
				<tr>
					<th data-ng-repeat="tla in game.teams track by $index">
						{{$index}}
					</th>
				</tr>
			</thead>
			<tr>
				<td data-ng-repeat="tla in game.teams track by $index" title="{{tla|teamInfo:teams|teamName}}">
					{{tla}}
					<span data-ng-if="!tla">-</span>
				</td>
			</tr>
		</table>
	</div>
</script>

<div class="current match"
     data-ng-if="current_match.exists"
     data-ng-init="data={description:'Current',match:current_match}"
     data-ng-include="'match-info'">
</div>
<div class="match"
     data-ng-if="next_match.exists"
     data-ng-init="data={description:'Next',match:next_match}"
     data-ng-include="'match-info'">
</div>
<div class="match"
     data-ng-if="upcoming_match.exists"
     data-ng-init="data={description:'Upcoming',match:upcoming_match}"
     data-ng-include="'match-info'">
</div>

{% endraw %}
</div>

<div id="leaderboard-container">
	<!-- TODO: maybe move to left so that you read this first
		this tells you that the TLAs are teams -->
	<div  class="more-link-container">
		<h2>Leaderboard</h2>
		<span class="more-link">
			<a href="{{ site.baseurl }}/comp/league">more&hellip;</a>
		</span>
	</div>
	<div id="leaderboard">
{% raw %}
<table>
	<thead>
		<tr>
			<th>Position</th>
			<th>Points</th>
			<th>Team</th>
		</tr>
	</thead>
	<tr data-ng-repeat="team in teams|leaderboard:10" id="{{team.tla}}">
		<td>{{team.league_pos}}</td>
		<td>{{team.scores.league}}</td>
		<td title="{{team|teamName}}">
			<a href="{% endraw %}{{ site.baseurl }}/{% raw %}teams/{{item.tla}}">{{team.tla}}</a>
		</td>
	</tr>
</table>
{% endraw %}
	</div>
</div>

<div id="match-schedule-container">
	<div class="more-link-container">
		<h2>Match Schedule</h2>
		<span class="more-link">
			<a href="{{ site.baseurl }}/comp/schedule">more&hellip;</a>
		</span>
	</div>
{% raw %}
<table class="schedule">
	<thead>
		<tr>
			<th>Time</th>
			<th>Match</th>
			<th data-ng-repeat="arena in arenas" colspan="4" style="color: {{arena.colour}};">Arena {{arena.display_name}}</th>
		</tr>
	</thead>
	<tbody>
		<tr data-ng-repeat="match in matches|matchesEndingAfterNow:time_offset|limitTo:10"
			data-ng-class="{current: match.num==current_match.num}"
			id="match-{{match.num}}">
			<td title="Begins at {{match.time|date:'HH:mm:ss on EEEE, d MMMM'}}.">{{match.time|date:'HH:mm'}}</td>
			<td title="{{match.display_name}}">{{match.num}}</td>
			<td data-ng-repeat="team in match.teams track by $index"
				data-ng-class="{no_match: !team}"
				title="{{team|teamInfo:teams|teamName}}">
				<!--- TODO: non-literal filtering, possibly based on the existence of the page -->
				<a data-ng-if="team && team != '-'"
				   href="{% endraw %}{{ site.baseurl }}/{% raw %}teams/{{team}}">{{team}}</a>
				<span data-ng-if="team == '-'">{{team}}</span>
			</td>
		</tr>
	</tbody>
</table>
{% endraw %}
</div>
